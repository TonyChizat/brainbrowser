/*
 * Copyright (C) 2011 McGill University
 * 
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 *   the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

/* brainbrowser v0.8.3 */
BrainBrowser.SurfaceViewer.plugins.ui=function(a){"use strict";$("body").keydown(function(b){var c=b.which,d={38:function(){a.zoom(1/1.1)},40:function(){a.zoom(1.1)},32:function(){a.separateHemispheres()}};return c in d?(d[c](),!1):!0}),$("#clear_color").change(function(b){a.updateClearColor(parseInt($(b.target).val(),16))}),$("#resetview").click(a.setupView),$(".view_button").change(a.setupView),$("[name=hem_view]").change(a.setupView),$("#meshmode").change(function(b){$(b.target).is(":checked")?a.set_fill_mode_wireframe():a.set_fill_mode_solid()}),$("#threedee").change(function(b){$(b.target).is(":checked")?a.anaglyphEffect():a.noEffect()}),$("#openImage").click(function(){function b(){var a=new Image;a.onload=function(){$("<div></div>").append(a).dialog({title:"Screenshot",height:a.height,width:a.width})},a.src=e.toDataURL()}function c(){var a=new Image;a.onload=function(){g.drawImage(a,0,0),b()},a.src=f.toDataURL()}var d=a.view_window,e=document.createElement("canvas"),f=document.getElementById("spectrum-canvas"),g=e.getContext("2d"),h=new Image;e.width=d.offsetWidth,e.height=d.offsetHeight,h.onload=function(){g.drawImage(h,0,0),f?c():b()},h.src=a.canvasDataURL()}),a.getViewParams=function(){return{view:$("[name=hem_view]:checked").val(),left:$("#left_hem_visible").is(":checked"),right:$("#right_hem_visible").is(":checked")}},$("#autorotate-controls").children().change(function(){a.autoRotate.x=$("#autorotateX").is(":checked"),a.autoRotate.y=$("#autorotateY").is(":checked"),a.autoRotate.z=$("#autorotateZ").is(":checked")})};